<?xml version="1.0"?>
<testCase version="7.3.0.201903220921">
    <execution>
        <parameters version="7.3.0.201903220921">
            <parameters escape="true">
                <parameters xmlns:pt="http://www.fnfr.com/schemas/parameterTree">
                    <reservationId>accda199-b3b3-498e-8470-fce9c6abfc3c</reservationId>
                    <property_ipAddress>184.73.27.190:8443</property_ipAddress>
                    <property_username>admin</property_username>
                    <property_password>bsn123</property_password>
                    <property_Hostname>R1L2</property_Hostname>
                    <call_count>2</call_count>
                    <call_A>addToVlan -vlanId 201 -portNumber R1L1-eth3 -tagging untagged</call_A>
                    <call_B>addToVlan -vlanId 201 -portNumber R1L1-eth4 -tagging untagged</call_B>
                    <call_C>addToVlan -vlanId 200 -portNumber virtual -tagging tagged</call_C>
                    <call_A>removeFromVlan -vlanId 201 -portNumber R1L1-eth3 -tagging untagged</call_A>
                    <call_V>removeFromVlan -vlanId 201 -portNumber R1L1-eth4 -tagging untagged</call_V>
                    <call_3>destroyVlan 201</call_3>
                    <call_4>destroyVlan 201</call_4>
                    <call_A>createVlan -vlanId 201</call_A>
                    <call_B>createVlan -vlanId 201</call_B>
                    <call_C>getPorts</call_C>
                    <call_A>addToVlan -vlanId 100 -portNumber R1L1-eth1 -tagging untagged</call_A>
                    <call_B>addToVlan -vlanId 10 -portNumber R1L1-eth1 -tagging tagged</call_B>
                    <call_0>addToVlan -vlanId 100 -portNumber R1L2-eth1 -tagging untagged</call_0>
                    <call_1>addToVlan -vlanId 10 -portNumber R1L2-eth1 -tagging tagged</call_1>
                </parameters>
            </parameters>
        </parameters>
    </execution>
    <procedures>
        <item name="main" isPublic="true">
            <steps>
                <item guid="b0a7d6c6-1209-483f-835d-3de460a9ed7d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Pass if not failed</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="none">
                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>1 == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="a06fd708-7438-42b5-b753-f7aaa71e655b" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set ret &quot;&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="faf46f46-ba76-4665-8373-daab4000f856" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Skip stuff if call_0 is getProperties, getPorts, createVlan or destroyVlan return info</body>
                    </command>
                    <nestedSteps>
                        <item guid="4a8cf00a-9423-4e32-9d15-1ebb3b1f3735" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[lsearch [param call_0] getPorts] &gt;= 0 | [lsearch [param call_0] getProperties] &gt;= 0 | [lsearch [param call_0] createVlan] &gt;= 0 | [lsearch [param call_0] destroyVlan] &gt;= 0</body>
                            </command>
                            <nestedSteps>
                                <item guid="fd916522-6a25-446e-931f-4434967de47a" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="c6bf4296-1d84-4943-a893-7ca6adb2cf42" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>{set i 0} {$i &lt; [param call_count]} {incr i}</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="b93df208-09de-4605-8ba6-8aa58c595745" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set cl [split [param call_$i]]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="bf26581c-4b50-464b-8cfb-195b4350609c" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set params [lassign $cl proc]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="b821c904-448e-46ca-a321-78b80ba5ec71" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>call procedure right now</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="ec1d50ed-d15d-43d8-85f3-698c9e192430" action="call" useFieldsInCommand="false">
                                                    <command>
                                                        <body>$proc [lindex $params end]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <storeResponseAt>ret</storeResponseAt>
                                                        <storeResponseText>true</storeResponseText>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="9118afba-53b8-4a2e-9b89-96fda42e8769" action="return">
                                            <command>
                                                <body>$ret</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="c7db9a77-e23e-4302-9967-3b4df2743dd2" action="comment" skip="true" useFieldsInCommand="false">
                    <command>
                        <body>Get res id for TESTING</body>
                    </command>
                    <nestedSteps>
                        <item guid="53c9815f-b927-4313-b5c9-bfa31172c3cc" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[set reservationId [velocity reservationId]] == {}</body>
                            </command>
                            <nestedSteps>
                                <item guid="3d3d4e17-8b2f-439e-a7f7-ea6df218e642" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="5e7f3002-1a5e-4e2c-8763-29ecf53d0f88" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>[set reservationId [param reservationId]] == {}</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="a00197f9-9e97-4910-b1da-6bb1830cc984" action="then" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="c4eacb02-fd9e-4c0d-9dd7-d828addeee96" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>Display message that reservationId not sent to automation</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="none">
                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="message">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                <message>Velocity reservationId not available to automation.</message>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f5b8a3ae-b26d-44ae-bf91-b7109494c9d1" action="return">
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3de18de9-d326-447f-8968-09c0c784a055" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get res id for PRODUCTION</body>
                    </command>
                    <nestedSteps>
                        <item guid="cb2384fc-1cf5-4f5d-9144-e1c42ede2ec5" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set reservationId {}</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="cf3887f8-db36-4cb8-b2a1-cfe5775f7d97" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set reservationId [velocity reservationId]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3f92faf8-2031-49b4-bce7-391fe0863007" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get info from Velocity</body>
                    </command>
                    <nestedSteps>
                        <item guid="fc4fdc38-9d0d-4a6c-964b-88d2bffc680f" action="call" useFieldsInCommand="false">
                            <command>
                                <body>getTopologyInfo -reservationId $reservationId</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>topo_info</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="248c414c-47ce-4eea-91a5-99887ec9a378" action="exit" useFieldsInCommand="false">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d66db5cd-27c9-4a5f-815a-3e8651d1f628" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open switch session send message if fail</body>
                    </command>
                    <nestedSteps>
                        <item guid="ba280904-6d27-4871-97b9-ad948ada9d46" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set ip_address [param property_ipAddress]; set username [param property_username]; set password [param property_password]; set switch_name [param property_Hostname]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="93e00b60-121a-4753-b366-6724fc37d22b" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set switch_url https://$ip_address</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5c74b189-4a59-466c-b8e1-ec43a4297865" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set fail 0</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="f5f65d65-5fdd-4ec6-9be6-f5d2a2689758" action="open" session="switch" useFieldsInCommand="false">
                            <command>
                                <body>project://ri_bigswitch_fabric/session_profiles/bigswitch_fabric.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties"/>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                        </item>
                        <item guid="4c341589-aada-4e78-b800-106c53bebe23" action="POST" session="switch">
                            <command>
                                <body>/api/v1/auth/login</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Json/success</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value eq &quot;true&quot;</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>Logged into Bigswitch Fabric</message>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>{auto_message_false}</message>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/session_cookie</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>session_cookie</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" message="\\{&quot;user&quot;:&quot;$username&quot;, &quot;password&quot;:&quot;$password&quot;\\}" message.inherit="false" action="/api/v1/auth/login" action.inherit="false"/>
                        </item>
                        <item guid="731ce196-8689-4249-b879-4e1c72a77570" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>gset SESSION_COOKIE $session_cookie</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f4769664-b33d-4bec-b2e8-24b0331f4b54" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Run procedures</body>
                    </command>
                    <nestedSteps>
                        <item guid="0f18e5df-9915-4186-8949-6af0158a1bb9" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>display</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message> Switch info :[param property_Hostname], [param property_ipAddress]</message>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <nestedSteps>
                                <item guid="9ba510bd-4ad6-4ff1-8d80-6bb2040e4530" action="for" useFieldsInCommand="false">
                                    <command>
                                        <body>{set i 0} {$i &lt; [param call_count]} {incr i}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="be2f6956-0dc7-47c8-b9e3-cc1b75375118" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>display</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message> Call $i : [param call_$i]</message>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="afe8dfa0-47a0-42cf-b481-b68ba6200569" action="for" useFieldsInCommand="false">
                            <command>
                                <body>{set z 0} {$z &lt; [param call_count]} {incr z}</body>
                            </command>
                            <nestedSteps>
                                <item guid="bc960b31-8426-43b2-81bb-f4e8c81e0d5b" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set proc [lindex [param call_$z] 0]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="16733ab1-d0f7-4f88-b340-5f297a9da3bc" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set arguments [string map {&apos; {}} [lrange [param call_$z] 1 end]]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2441aa77-d36a-476b-8cba-8ac4b90f63bc" action="eval" skip="true" useFieldsInCommand="false">
                                    <command>
                                        <body>array set params $arguments</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="74524d02-5970-4d5e-a95f-93d43ad27883" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>output message</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>1 == 1</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                    <message>calling $proc with arguments $arguments -switch_name $switch_name </message>
                                                                </actionProperties>
                                                            </item>
                                                        </actionsWhenTrue>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d561bce3-5c9f-4b74-bb28-5c1ebacd221f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>lassign $arguments a b c d e f g h i j</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="a9eebfcd-6884-49f1-9415-74c9c8d640c9" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts &quot;running command: $proc -topo_info $topo_info $a $b $c $d $e $f $g $h $i $j&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8e56d949-f07d-4a58-875e-db8f6646eed1" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>$proc -switch_name &quot;$switch_name&quot; -topo_info $topo_info $a $b $c $d $e $f $g $h $i $j</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>ret</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="5aaf9502-d140-463c-9529-32c345f5debc" action="return">
                    <command>
                        <body>$ret</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="addToVlan">
            <steps>
                <item guid="948c2068-d65b-46b2-9302-13c8c30d63ed" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check to see if the port is &quot;virtual&quot; and return of it is</body>
                    </command>
                    <nestedSteps>
                        <item guid="8e5dfef5-0f78-4945-94b4-5aadd72bf473" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[string match -nocase *virtual* $portNumber]</body>
                            </command>
                            <nestedSteps>
                                <item guid="861bf443-3adc-4213-a35c-402fcffd26ce" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="a600391b-0455-4498-8955-aaadab6a1b05" action="return">
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d4b3f498-7ee9-4c0f-bbba-c97bc7108f5c" action="if" useFieldsInCommand="false">
                    <command>
                        <body>[set reservationId [velocity reservationId]] == {}</body>
                    </command>
                    <nestedSteps>
                        <item guid="e854c701-c1e9-4a52-8e99-98d38fbeee61" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="f8b82185-db37-49f8-99b2-118e4a870e00" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[set reservationId [param reservationId]] == {}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="edc87c89-6788-4d49-8beb-af2e82c89445" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="2d546af2-d342-4f32-aeb8-d11292a9aac7" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Display message that reservationId not sent to automation</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="message">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                        <message>Velocity reservationId not available to automation.</message>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="c7c475de-e100-4599-b34b-26baf62c7f95" action="return">
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6e5048c2-9da7-47b7-8850-703e63b01014" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>add reservation id as the &quot;tenant&quot;.  Do this blindly, as doing it over and over probably won&apos;t make a difference</body>
                    </command>
                    <nestedSteps>
                        <item guid="050b32ce-5e49-4301-900a-c2d0f6346c70" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set cookie [gget SESSION_COOKIE]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="bfca6476-a946-4519-98ed-2f15f3ef23f8" action="POST" session="switch" useFieldsInCommand="false">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;name&quot;: &quot;$reservationId&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D" action.inherit="false">
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="admin" user.inherit="false"/>
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="content-type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="398ffc70-059d-4d29-a16b-ec9165da1425" action="GET" session="switch">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="{&quot;name&quot;: &quot;$reservationId&quot;}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant" action.inherit="false">
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="admin" user.inherit="false"/>
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="content-type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ef8206ad-90a1-4495-afdd-9493bcee6a17" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>get segment id from json passed in.</body>
                    </command>
                    <nestedSteps>
                        <item guid="8ca3202a-92d3-47b1-b251-ae8930247668" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set portNumber</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="47ca01fc-9f31-4cac-aae3-e094cbd870ec" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set vlanId</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="952b2276-8a88-4a2d-8842-1a240ad471a6" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set switch_name</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="f2eb6629-ee65-4fcd-a777-7132e41a6e85" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set tagging</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="41a96975-b071-4c8d-a05c-cd9158fd3f55" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set topo_info</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query sub="true">mapped/Json/connections/item\\[./items/item/switch_name = &apos;$switch_name&apos; and ./items/item/tagging = &apos;$tagging&apos; and ./items/item/vlan = &apos;$vlanId&apos; and ./items/item/port_name = &apos;$portNumber&apos;\\]/id</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>segment_id</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f0a6501d-1058-45a5-8502-875cf53993f5" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>add segment to tenant</body>
                    </command>
                    <nestedSteps>
                        <item guid="6cdaed36-a18c-4d2c-a68c-297d2ffc459e" action="POST" session="switch">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;name&quot;: &quot;$segment_id&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="e13f1fe7-76e0-402d-9eb5-3fbbd668bcec" action="GET" session="switch">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="{&quot;name&quot;: &quot;$segment_id&quot;}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f6d5e256-38ed-40f0-ad26-4bc4b7a8d968" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>add interface to segment</body>
                    </command>
                    <nestedSteps>
                        <item guid="4e84c223-cc90-4d01-bb06-2ac79e6fae5d" action="if" useFieldsInCommand="false">
                            <command>
                                <body>$tagging == &quot;untagged&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="b8b0dfc5-4404-41b1-b74c-595e8e2b476a" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="c7f4388d-400e-4357-b17a-70c21ed98c95" action="PUT" session="switch" skip="true">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=-1%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;vlan&quot;: -1, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=-1%5D" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                        <item guid="0e3b6fad-e260-47b9-82a3-6df54ab80547" action="POST" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;vlan&quot;: -1, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                        <item guid="5948630a-b9b6-4c1a-8530-db4c8c1b9015" action="POST" session="switch" skip="true">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;switch&quot;: &quot;$switch_name&quot;, &quot;interface&quot;: &quot;$portNumber&quot;,&quot;vlan&quot;: -1\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="226e05ac-ed05-42a2-8160-73c29841a993" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="3d68c8fc-8bfb-4796-b272-4190fc4de15d" action="POST" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=$vlanId%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;vlan&quot;: $vlanId, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=$vlanId%5D" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="9fcdc362-6129-4ff6-9530-713ce11e4781" action="GET" session="switch">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="{&quot;vlan&quot;: -1, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="bdcaa2c2-1a83-4b3c-afd2-c42923fe63a1" action="return">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="topo_info">
                    <defaultValue>0</defaultValue>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="switch_name"/>
            </arguments>
            <response>{}</response>
        </item>
        <item name="removeFromVlan">
            <steps>
                <item guid="194c03c8-9d97-4af5-a9a5-b70e9fdc1cfa" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check to see if the port is &quot;virtual&quot; and return of it is</body>
                    </command>
                    <nestedSteps>
                        <item guid="8d38e2f5-da16-4bbb-b3ce-d4ace1829e14" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[string match -nocase *virtual* $portNumber]</body>
                            </command>
                            <nestedSteps>
                                <item guid="bcf96744-ce94-4265-874e-bfa8356a46ef" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="e0460ec5-6ed0-4e3c-b5fe-6c5f7380bfe9" action="return">
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8eaa022a-afbc-42b5-bf40-363f15ac6b12" action="if" useFieldsInCommand="false">
                    <command>
                        <body>[set reservationId [velocity reservationId]] == {}</body>
                    </command>
                    <nestedSteps>
                        <item guid="25ae5dea-e027-4d0a-94f3-2d69256c2bb5" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="dc1e50f7-dbc8-42a7-81d5-8eba73ab1b99" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[set reservationId [param reservationId]] == {}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="cc2086a3-a748-461d-824b-ee04966e3855" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="da55365e-fc51-4195-9f4d-6fba083f0c92" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Display message that reservationId not sent to automation</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="message">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                        <message>Velocity reservationId not available to automation.</message>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="22011f63-75ad-4ac9-a6b5-fd84e2c80194" action="return">
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e9b9c732-d753-442e-bf22-fc22e17af94b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>get segment id from json passed in.</body>
                    </command>
                    <nestedSteps>
                        <item guid="dbe557bc-7cc4-4487-b0a4-76126abea110" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set cookie [gget SESSION_COOKIE]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="6e656ca0-f188-46bd-9b0f-b9dc8cd7af26" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set portNumber</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="3d26c0eb-ba5b-4a3b-ba55-275e3871a802" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set vlanId</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="138dff8e-a95a-4ec9-878c-47ac517589b6" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set switch_name</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="2efeb3a8-4f99-4ce8-9e08-a5a47bef0885" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set tagging</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="baa25b6d-de68-4bd5-98c9-d3822b730553" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set topo_info</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query sub="true">mapped/Json/connections/item\\[./items/item/switch_name = &apos;$switch_name&apos; and ./items/item/tagging = &apos;$tagging&apos; and ./items/item/vlan = &apos;$vlanId&apos; and ./items/item/port_name = &apos;$portNumber&apos;]/id</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>segment_id</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="acc9503d-db4c-47c5-acfa-33862a3c5982" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>delete interface from segment</body>
                    </command>
                    <nestedSteps>
                        <item guid="7a521be2-1824-4c71-af07-92e4ffee9f94" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set portNumber</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d66ccde6-44a9-47dd-a618-f97e6f0285f0" action="if" useFieldsInCommand="false">
                            <command>
                                <body>$tagging == &quot;untagged&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="faf854a1-d5fa-43cf-8169-f4acc7bff398" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="f7bbd1e5-911f-4740-926d-497c8380ddeb" action="DELETE" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=-1%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;vlan&quot;: -1, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=-1%5D" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bb994810-8c87-4caf-8370-3814588b952e" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="2f37834d-410c-4eb7-b0df-e0fc23b22a09" action="DELETE" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=$vlanId%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;vlan&quot;: $vlanId, &quot;interface&quot;: &quot;$portNumber&quot;, &quot;switch&quot;: &quot;$switch_name&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule%5Bswitch=%22$switch_name%22%5D%5Binterface=%22$portNumber%22%5D%5Bvlan=$vlanId%5D" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="50dac918-2717-43fb-baa7-9799cde2a9b8" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>delete segment IF no port groups in segment</body>
                    </command>
                    <nestedSteps>
                        <item guid="bc74352e-266e-4904-82a5-0d0155c305fe" action="GET" session="switch">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>responseRawText</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>jsonResponse</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D/switch-port-membership-rule" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="f07138c4-325d-498f-ac60-2ce7b3f49053" action="if" useFieldsInCommand="false">
                            <command>
                                <body>$jsonResponse eq &quot;\\[ \\]&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="0917ca6f-21c0-45da-a91a-6a8dc194722d" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="56c7f893-cc4e-43eb-8954-c4fa3f30d9f9" action="DELETE" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;name&quot;: &quot;$segment_id&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment%5Bname=%22$segment_id%22%5D" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="a8e7c4ef-f74f-416b-bbb8-22bcf8d8c6c9" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>check to see if the tenant (res_id) has any child segments. if no, delete the tenant</body>
                    </command>
                    <nestedSteps>
                        <item guid="1e525330-14b4-4267-9f21-e2d78e500421" action="GET" session="switch" useFieldsInCommand="false">
                            <command>
                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>responseRawText</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>jsonResponse</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D/segment" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="00dd2ff5-e307-4567-9f45-297211f38009" action="if" useFieldsInCommand="false">
                            <command>
                                <body>$jsonResponse eq &quot;\\[ \\]&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="d80c8cb0-c08e-4863-aaa4-a0cda214fa86" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="d4ac6fc4-4a5b-47b7-81d8-bb4a835a6eee" action="DELETE" session="switch">
                                            <command>
                                                <body>/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" message="\\{&quot;name&quot;: &quot;$reservationId&quot;\\}" message.inherit="false" action="/api/v1/data/controller/applications/bcf/tenant%5Bname=%22$reservationId%22%5D" action.inherit="false">
                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false"/>
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Cookie" header.inherit="false" value="session_cookie=$cookie" value.inherit="false"/>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="content-type" header.inherit="false" value="application/json" value.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="c9d64cfd-e5ed-4ba5-abbb-86fa60e911fb" action="return">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="topo_info">
                    <defaultValue>0</defaultValue>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="switch_name"/>
            </arguments>
            <response>{}</response>
        </item>
        <item name="createVlan">
            <steps>
                <item guid="8070fa2c-1848-4a55-956b-a19ba39ed826" action="return">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="vlanId"/>
                <item name="tagged">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
            <response>{}</response>
        </item>
        <item name="destroyVlan">
            <steps>
                <item guid="afdc8d15-dba2-4507-b983-fe9713a24b99" action="return">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="getProperties">
            <steps>
                <item guid="79f6510d-eb92-4145-9eff-1d078517a42e" action="write" useFieldsInCommand="false">
                    <command>
                        <body>{&quot;properties&quot;: {}, &quot;ports&quot;: []}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="getPorts">
            <steps>
                <item guid="a6d55e77-4cda-4d95-8eb7-c36d65256132" action="open" session="proc" useFieldsInCommand="false">
                    <command>
                        <body>application:com.fnfr.svt.applications.process</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                        <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionProperties type="com.fnfr.svt.applications.process.ProcessSessionProperties"/>
                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    </applicationProperties>
                </item>
                <item guid="eb49beb2-1186-4d72-a32a-4ae4cd98636b" action="call" useFieldsInCommand="false">
                    <command>
                        <body>getHostParameter</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>deviceHost</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="739f470b-b575-446b-a791-f5f22d0d3909" action="call" useFieldsInCommand="false">
                    <command>
                        <body>getDeviceStatus -deviceHost $deviceHost</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>offline</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Device is offline, could not get ports</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="AbortExecution">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="641e4b8e-072c-4b37-b84c-d35477fc5458" action="close" session="proc">
                    <command>
                        <body>application:com.fnfr.svt.applications.process</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="none">
                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>1 == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d37e676e-96b9-4243-980a-e82a1eb2a157" action="write" useFieldsInCommand="false">
                    <command>
                        <body>{&quot;ports&quot;: []}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="getAllResources">
            <steps>
                <item guid="f1d3e0e1-2a06-4d8d-be2b-9110b888f26a" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set offset 0</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="0f00b917-e4b3-4b27-9f72-e4f5a2038136" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set count 0</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3903d697-c9da-468e-87cf-91376beb2cc8" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set total 1</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6f037282-4553-4c2b-aa19-535ade7d39a6" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set index 0</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d3fa9cab-a4fe-477e-8fcd-b396c9f0ed83" action="while" useFieldsInCommand="false">
                    <command>
                        <body>$offset &lt;= $total</body>
                    </command>
                    <nestedSteps>
                        <item guid="5a3223e3-fda3-4344-b101-ce22e9197fb7" action="GET" session="vel">
                            <command>
                                <body>/velocity/api/reservation/v12/reservation/$reservationId/resources?limit=200&amp;offset=$offset</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>//total</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>total</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>//offset</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>offset</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>//count</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>count</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>resource_json($index)</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/reservation/v12/reservation/$reservationId/resources?limit=200&amp;offset=$offset" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                        <item guid="21b8b1c1-afde-4ad3-acb7-5ab50cc63897" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>incr index</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="34d9744b-7f11-4daf-9fff-f70937ce469c" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>incr offset 200</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="7ddedf82-bf4d-47ed-9e3a-a31d605bd756" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>puts &quot;total = $total, count = $count, offset = $offset&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="adfabca6-c4cf-4402-8efe-f97b0074f9c8" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>array names resource_json</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="efd2496e-75ee-432e-a849-842c99b69def" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set thelist {}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ff3d4f91-213f-4a5e-9ab5-5e4e50085c1e" action="foreach" useFieldsInCommand="false">
                    <command>
                        <body>i [lsort -dictionary [array names resource_json]]</body>
                    </command>
                    <nestedSteps>
                        <item guid="995a05db-f0d5-439f-a4ea-77dae4a3c765" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set resources $resource_json($i)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="77f85cb1-a882-43f6-b824-6bd2b84963d2" action="json" useFieldsInCommand="false">
                            <command>
                                <body>-action getJsonNode -editResponseStructure false -documentName resources -pathValue items</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>just_resources_json</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                <action inherit="false">getJsonNode</action>
                                <pathValue inherit="false">items</pathValue>
                                <documentName inherit="false">resources</documentName>
                            </applicationProperties>
                        </item>
                        <item guid="bca28201-9b18-47b4-956c-8f75fa51873f" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set x [string range $just_resources_json 10 end-2]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8752ee1f-7b52-4578-bd84-6c6e40770cb2" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>lappend thelist $x</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cf1de9c0-1870-4dae-95f5-4ec19095d979" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set ret &quot;\\{\\&quot;resources\\&quot;:\\[[join $thelist ,]\\]\\}&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e159fa55-192f-40c3-9b5d-d6b05a491fed" action="return">
                    <command>
                        <body>$ret</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="reservationId">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="vel_token">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="getTopologyInfo">
            <steps>
                <item guid="6f9213cd-2609-4007-ac02-fe31bb58dac1" action="if" useFieldsInCommand="false">
                    <command>
                        <body>$reservationId != {}</body>
                    </command>
                    <nestedSteps>
                        <item guid="ab832922-20eb-4d05-982c-f2bd538ce1fe" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="f0971e28-edc4-4a21-8e9f-df47a51c29ce" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set vlans {} ; set cons {}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5e5fb176-3bd4-487b-bb7a-c0cc5adb23e3" action="open" session="vel" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ri_bigswitch_fabric/session_profiles/velocity_REST.ffsp</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                        <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties"/>
                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </applicationProperties>
                                </item>
                                <item guid="cef882fb-3edf-45a1-8b2a-fb8ed193df76" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[set vel_token [velocity token]] == {}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="3c9b80a5-5e9f-47b9-97c3-7429b5e732f9" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="05963d43-1da7-46dd-aa11-67a05a7ae26a" action="GET" session="vel">
                                                    <command>
                                                        <body>/velocity/api/auth/v2/token</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/token</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>vel_token</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/auth/v2/token" action.inherit="false">
                                                        <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="spirent" user.inherit="false" password.masked="true" password="SrqvrrOjrgE=" password.inherit="false"/>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="02505b3c-bfdf-4b0e-8dd1-1b20896d8571" action="GET" session="vel">
                                    <command>
                                        <body>/velocity/api/reservation/v12/reservation/$reservationId/vlans</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/item/vlanIds</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>vlans</storageLocation>
                                                        <storeInAList>true</storeInAList>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/item/originalId</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>cons</storageLocation>
                                                        <storeInAList>true</storeInAList>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/reservation/v12/reservation/$reservationId/vlans" action.inherit="false">
                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                            <memberClasses>
                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                            </memberClasses>
                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                        </httpHeader>
                                    </applicationProperties>
                                </item>
                                <item guid="d9335eb7-4711-40a3-a8f6-58b5fc6f67a6" action="GET" session="vel">
                                    <command>
                                        <body>/velocity/api/reservation/v12/reservation/$reservationId/topology</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>tbml</storeResponseAt>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/reservation/v12/reservation/$reservationId/topology" action.inherit="false">
                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                            <memberClasses>
                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                            </memberClasses>
                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                        </httpHeader>
                                    </applicationProperties>
                                </item>
                                <item guid="a7dda9a0-af5f-4b51-9d3c-01fa3ba9eae8" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>getAllResources -reservationId $reservationId -vel_token $vel_token</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>json</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <eventHandlers>
                                        <item name="OnNoMatchesFound">
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>Processing eVPN calls</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </item>
                                    </eventHandlers>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2fb9076a-8ca5-4089-a9b6-17509df087e6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set json</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>resource_json</storeResponseAt>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="95e90429-0280-437e-932d-b013351f4dc6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts &quot;$vlans $cons&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7079c124-ab5d-4de5-9da8-36069ca245fa" action="foreach" useFieldsInCommand="false">
                                    <command>
                                        <body>vlan $vlans con $cons</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="9ff0fd10-5ad7-4a68-bfa0-6c2517968b9c" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set con_vlan($con) [split $vlan ,]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="6298dce6-b9af-4f7b-ada7-c7dacbda349f" action="foreach" useFieldsInCommand="false">
                                    <command>
                                        <body>con $cons</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="c1a583c8-5550-444c-a75a-ff6210722692" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>get the type of connection</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="66b48851-19f2-49b0-bca2-b9e51bc2c9cc" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set con</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="74594eee-61e5-4f98-835f-85aa08c9643f" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set tbml</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="00859444-bd31-404e-bd82-a5a43465941f" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set con_type [query tbml &quot;//Xml//resource\\[@guid=&apos;$con&apos;\\]/@type&quot;]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="7ba48aa6-0b20-4822-9dcf-27d1a871caab" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>get info based on TYPE of connection (vlan, multi-vlan, or {})</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="ae5036c9-cd30-4b79-a865-f5ef3eb5f9b4" action="switch" useFieldsInCommand="false">
                                                    <command>
                                                        <body>$con_type</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="858de0db-97cf-48c3-9192-cfbb7bb07811" action="case" useFieldsInCommand="false">
                                                            <command>
                                                                <body>&quot;vlan&quot;</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="b5d88fe3-cfce-4f3b-a906-5f355560ba3b" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>get list of endpoints that are not the vlan cloud</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="d076e863-85db-4c68-8861-8fbf2cb42e23" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set endpoints [query tbml &quot;mapped/Xml/tbml/body/connectivity/link/endpoint\\[@id=&apos;$con&apos;\\]/../endpoint\\[@id!=&apos;$con&apos;\\]/@id&quot;]</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="1458d88b-ea9b-43d4-9b3f-88b740ec5ea3" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>foreach endpoint get the connected port name, switch name and store in array var &apos;connections&apos;</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="953f1733-9c1c-44c9-8d29-3ed94540be1c" action="foreach" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>endpoint $endpoints</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="41e84107-35a0-41d0-8728-61f801cf21c6" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set port_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="b60d6f9e-91de-423b-8e06-4ea84e1ec6df" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set parent_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryParentResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="2fcbf029-f06f-49df-93b8-0a33c16f8ed5" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>switch_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/name</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/parentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="0462a843-1151-4bb1-a2f1-f951b51a2440" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_parent_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="none">
                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>$back_con_parent_name != {}</expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set port_name $back_con_port_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set switch_name $back_con_parent_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="RepeatStep">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="5" delayBetweenRepeats="0.0"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="05de8491-7e3b-439d-8f46-b745e07ec6fe" action="GET" session="vel" skip="true">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>switch_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="339cf94c-70d0-49f3-a4e6-7a3c9e7fff55" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>lappend connections($con) &quot;&apos;vlan&apos;:&apos;$con_vlan($con)&apos;,&apos;port_name&apos;:&apos;$port_name&apos;,&apos;switch_name&apos;:&apos;$switch_name&apos;,&apos;tagging&apos;:&apos;untagged&apos;,&apos;connected_device&apos;:&apos;$dev_name&apos;,&apos;connected_device_port&apos;:&apos;$dev_port_name&apos;&quot;</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="be6b45fe-0ada-4b3b-9c02-32ebaa5d56c3" action="case" useFieldsInCommand="false">
                                                            <command>
                                                                <body>&quot;multivlan&quot;</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="e85b1a38-da95-4236-a06f-19145b101e23" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>get list of endpoints that are not the multivlan cloud</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="855d8cc8-3fbe-411a-8ebd-90f03764295a" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set vportids [query tbml &quot;//Xml//resource\\[@guid=&apos;$con&apos;\\]/resource/@id&quot;]</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="e620431f-b729-4e50-9bc6-24d32b22e9c3" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set untagged [query tbml &quot;//Xml//resource\\[@guid=&apos;$con&apos;\\]/resource/property\\[@name=untaggedVlanId\\]&quot;]</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="38ce446a-0e46-4819-8356-9466fb08c9e0" action="foreach" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>vportid $vportids</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="ef9b0292-63a2-485b-bbf9-5ebf540d50bd" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set endpoint [query tbml &quot;mapped/Xml/tbml/body/connectivity/link/endpoint\\[@id=&apos;$vportid&apos;\\]/../endpoint\\[@id!=&apos;$vportid&apos;\\]/@id&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="67a3e875-94b0-40f8-acd7-8dd15458ec5a" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set untagged_vlan [query tbml &quot;//Xml//resource\\[@guid=&apos;$con&apos;\\]/resource\\[@id=&apos;$vportid&apos;\\]/property\\[@name=&apos;untaggedVlanId&apos;\\]&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="dc4b2de4-55ca-415b-8fa9-f55b5722d87d" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set tagged_vlans [query tbml &quot;//Xml//resource\\[@guid=&apos;$con&apos;\\]/resource\\[@id=&apos;$vportid&apos;\\]/property\\[@name=&apos;taggedVlanIds&apos;\\]&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="7c40ac9a-bd7f-47f1-9a4b-930080f448b3" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set port_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="eae09dfb-83a2-4c42-aae6-4ebe977ca016" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set parent_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryParentResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="2d2a0067-49f1-4637-a065-4205a009bf69" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>switch_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/name</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/parentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="390e94aa-7f0a-490e-b84d-25f78a0b59ee" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_parent_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="none">
                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>$back_con_parent_name != {}</expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set port_name $back_con_port_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set switch_name $back_con_parent_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="RepeatStep">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="5" delayBetweenRepeats="0.0"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="00c188f5-0ee3-4ab9-a7a2-96fc523f2a25" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>[string trim $untagged_vlan] != {}</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="7dbad0d1-f258-46a4-b780-fd31e7a9f9b6" action="then" useFieldsInCommand="false">
                                                                                            <nestedSteps>
                                                                                                <item guid="bff2cbb2-532f-4bb2-86bf-48238ca2134c" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>lappend connections(${con}_${untagged_vlan}) &quot;&apos;vlan&apos;:&apos;$untagged_vlan&apos;,&apos;port_name&apos;:&apos;$port_name&apos;,&apos;switch_name&apos;:&apos;$switch_name&apos;,&apos;tagging&apos;:&apos;untagged&apos;,&apos;connected_device&apos;:&apos;$dev_name&apos;,&apos;connected_device_port&apos;:&apos;$dev_port_name&apos;&quot;</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="b7574703-1750-462b-9f3a-3c07621ee54d" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>[string trim $tagged_vlans] != {}</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="0f6bc0d0-7eab-4314-88cd-0149588c5a8f" action="then" useFieldsInCommand="false">
                                                                                            <nestedSteps>
                                                                                                <item guid="99e0baa7-437d-495d-9df7-2ce49313dd0e" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Handle weird return of vlan list ... example &quot;10, 20&quot; first remove all spaces then split on ,</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="5f533c1a-a932-49c8-a64c-c32fed4d5f84" action="eval" skip="true" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set fixed_vlanlist [split [string map {{ } {}} $tagged_vlans] ,] </body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="3e0c4307-93a5-495b-a076-789a270d9b5b" action="call" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>cleanVlanList -vlan_list $tagged_vlans</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <storeResponseAt>fixed_vlanlist</storeResponseAt>
                                                                                                                <storeResponseText>true</storeResponseText>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a4ad535b-35d8-4a08-9e58-957aff1b10b3" action="foreach" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>vlan $fixed_vlanlist</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="66033ed3-6f61-4452-9d8c-dad4d8caeb84" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lappend connections(${con}_$vlan) &quot;&apos;vlan&apos;:&apos;$vlan&apos;,&apos;port_name&apos;:&apos;$port_name&apos;,&apos;switch_name&apos;:&apos;$switch_name&apos;,&apos;tagging&apos;:&apos;tagged&apos;,&apos;connected_device&apos;:&apos;$dev_name&apos;,&apos;connected_device_port&apos;:&apos;$dev_port_name&apos;&quot;</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="fee52865-8983-461c-8b61-31d0419992d7" action="default" useFieldsInCommand="false">
                                                            <command>
                                                                <body>handle point to point</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="26cce506-be6b-4240-bdd4-1fb8bd6741a0" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>get list of endpoints that are not the vlan cloud</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="d16dd522-36bd-4d7f-92d2-39a68a4d785b" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set endpoints [query tbml &quot;mapped/Xml/tbml/body/connectivity/link\\[@id=&apos;$con&apos;\\]/endpoint/@id&quot;]</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="f18ee367-47cd-4897-93e8-cd27aee30857" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>foreach endpoint get the connected port name, switch name and store in array var &apos;connections&apos;</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="689ad399-5288-4554-8ca1-8930473cfc0f" action="foreach" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>endpoint $endpoints</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="97fd0f69-50e9-4bdb-92fb-baaa21140d67" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set port_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="64946adb-2ca7-4a31-b26d-87ac861a62c1" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>set parent_id [query resource_json &quot;mapped/Json/resources/item\\[type=&apos;PORT&apos; and topologyResourceId=&apos;$endpoint&apos;\\]/inventoryParentResourceId&quot;]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="eea7eff1-26bb-4fef-bc22-c9f3c2a14e1b" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>switch_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/name</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/parentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>dev_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="b32c528f-23f0-43c7-8fe1-72be10127f39" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_parent_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>con_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/backConnectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>back_con_parent_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="none">
                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>$back_con_parent_name != {}</expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set port_name $back_con_port_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="Eval">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                                                    <statement>set switch_name $back_con_parent_name</statement>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="RepeatStep">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="5" delayBetweenRepeats="0.0"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$con_parent_id/ports?filter=id::$con_port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="188f72f3-d0a7-4a17-8d73-6871776070da" action="GET" session="vel">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>mapped/Json/ports/item/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>switch_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" action="/velocity/api/inventory/v9/device/$parent_id/ports?filter=id::$port_id" action.inherit="false">
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" header.sub="false" value="$vel_token" value.inherit="false"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="01fa30f0-257e-4bf0-a74e-c28e172d7276" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>lappend connections($con) &quot;&apos;vlan&apos;:&apos;$con_vlan($con)&apos;,&apos;port_name&apos;:&apos;$port_name&apos;,&apos;switch_name&apos;:&apos;$switch_name&apos;,&apos;tagging&apos;:&apos;untagged&apos;,&apos;connected_device&apos;:&apos;$dev_name&apos;,&apos;connected_device_port&apos;:&apos;$dev_port_name&apos;&quot;</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e1ee6ab8-bd8a-40c1-a175-49df416d4541" action="write">
                                    <command>
                                        <body>\\{&apos;connections&apos;:\\[\\{</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="89b797ce-f7b1-46be-a494-2eef85cc15c0" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set tmp {}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="0deef265-f95e-4c13-8533-217475892321" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts [array names connections]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="4aff3e18-3825-41f7-b54f-143f6687794c" action="foreach" useFieldsInCommand="false">
                                    <command>
                                        <body>id [array names connections]</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="83734c65-35b2-4f40-8f3a-61414e2630b1" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>lappend tmp &apos;id&apos;:&apos;$id&apos;,&apos;items&apos;:\\[\\{[join $connections($id) \\},\\{]\\}\\]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="4963f2e1-e0d6-4529-8db2-c6b347fc1f83" action="write" skip="true">
                                            <command>
                                                <body>\\{[join $connections($id) \\},\\{]\\}</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="d0ad9a38-5661-4a68-9c31-1dca5d0da2e4" action="write" skip="true">
                                            <command>
                                                <body>\\},</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bfb53bc8-3deb-4cf8-9c30-5d53e9477bd5" action="write">
                                    <command>
                                        <body>[join $tmp \\},\\{]\\}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="955be7b8-9ab1-414c-9fad-fda127979d1b" action="write">
                                    <command>
                                        <body>\\]\\}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="29558513-a71c-46dd-8256-5a84a7fddf01" action="return">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1e6103e8-ca26-4a03-8ba4-eb57b6c70875" action="close" session="vel">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="756596fb-ab13-4c93-bad4-6df385835c00" action="return">
                                    <command>
                                        <body>$json</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="reservationId"/>
            </arguments>
            <response>{&quot;connections&quot;:{&quot;id&quot;:&quot;value&quot;,&quot;items&quot;:{&quot;vlan&quot;:&quot;value&quot;,&quot;key&quot;:&quot;value&quot;}}}</response>
        </item>
        <item name="getHostParameter">
            <steps>
                <item guid="413f161d-2c2e-4379-8218-98a6ceb363df" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set host &quot;&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="669734b7-4b56-43d3-b9f7-60cf3e28f2b6" action="if" useFieldsInCommand="false">
                    <command>
                        <body>[info exists param property_mgmt_ip_address] == 1</body>
                    </command>
                    <nestedSteps>
                        <item guid="bd9df64b-df23-431d-882e-65a7143a9480" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="1d8946e8-2ef5-4196-b0fa-982f297e523d" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[param property_mgmt_ip_address] != &quot;&quot;</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="2e9267b2-8e8e-4b4f-8f8e-94a351a455f4" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="23485e06-8352-47de-abd1-4906b3f6cf9e" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set host [param property_mgmt_ip_address]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="4bf224f5-4401-4739-a392-fd559e0ecb3c" action="if" useFieldsInCommand="false">
                    <command>
                        <body>[info exists param property_ipAddress] == 1</body>
                    </command>
                    <nestedSteps>
                        <item guid="9fcdf9f9-0f8e-4932-b6b9-003d8f8b8f1e" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="db3d62b5-2c76-4d59-8913-c591422401d0" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[param property_ipAddress] != &quot;&quot;</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="ab86f10b-8773-4609-aefb-8c867f411915" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="e332989c-8d68-4caf-9bee-9ca98ddc8f0e" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set host [param property_ipAddress]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6898f16f-2939-4338-b3f7-82500f205c70" action="if" useFieldsInCommand="false">
                    <command>
                        <body>$host == &quot;&quot; &amp;&amp; [info exists param property_Hostname]</body>
                    </command>
                    <nestedSteps>
                        <item guid="af1cc195-62b7-4bc8-85a1-f8f16365856c" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="9899df0a-479f-44dd-a00e-285631ce0fe8" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[param property_Hostname] != &quot;&quot;</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="0b30cb8a-d1d7-496e-b26a-e08d9878993b" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="4b46ba7f-d171-4933-876f-bbf9ba445f83" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set host [param property_Hostname]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3a4014da-0936-4f4f-98c1-eddb979a86f5" action="if" useFieldsInCommand="false">
                    <command>
                        <body>$host == &quot;&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="81cf47d2-d6f5-4b8a-bd23-476cca08b8b9" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="78f17961-e149-4079-b709-e3d0d33c205f" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Parameter ipAddress or Hostname should be specified</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>1 == 1</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                    <message>Parameter mgmt_ip_address, ipAddress or Hostname should be specified.</message>
                                                                </actionProperties>
                                                            </item>
                                                            <item actionId="FailTest">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                            <item actionId="AbortExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenTrue>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="26b0833b-a5c3-46f5-8303-9a937249259e" action="return">
                    <command>
                        <body>$host</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <response>{}</response>
        </item>
        <item name="getDeviceStatus">
            <steps>
                <item guid="d2548b94-a58b-4955-a1f8-da6cfda8d1f6" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set ret &quot;offline&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="4d8bafd5-c7db-4480-9a08-e9c3075e5020" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set host [lindex [split $deviceHost :] 0]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7db4e130-592b-48d1-a5a0-81b954bea046" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Linux and MacOS ping command, send 3 packets with 3 second timeout</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="325ce1ea-aa6c-48db-bc8a-4c319e7f1907" action="command" session="proc">
                    <command>
                        <body>run ping -c 2 -W 3 $host</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>Bad option -c</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>{auto_message_true}</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>Bad value for option -c</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>{auto_message_true}</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>Access denied</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>{auto_message_true}</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>received</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Ping request could not find host [gget deviceHost]. Please check the IP address or hostname.</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="AbortExecution">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>exit code: 0</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set ret &quot;online&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7f7ae1f9-7e9f-43c6-9c65-054c3f7136e2" action="if" useFieldsInCommand="false">
                    <command>
                        <body>$ret == &quot;online&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="5f2818a1-8f5a-44b0-b48d-5b762229daf7" action="then" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="9346a16f-462c-45b9-80ab-cc13158a9575" action="return">
                                    <command>
                                        <body>$ret</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8a41e384-dcb1-4956-9781-287c879773c4" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Windows ping command, send 3 packets with 3 second timeout</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="580c9fc0-e1b0-4e8c-88d1-d66fe63e9a48" action="command" session="proc">
                    <command>
                        <body>run ping -n 2 -w 3000 $host</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>received</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Ping request could not find host [gget deviceHost]. Please check the IP address or hostname.</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="AbortExecution">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>exit code: 0</searchString>
                                        <matchType>CaseInsensitive</matchType>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set ret &quot;online&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="737a9710-3b9a-4830-a061-fdba660d4b67" action="return">
                    <command>
                        <body>$ret</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="deviceHost">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{}</response>
        </item>
        <item name="convertToTclHtmlEscaped">
            <steps>
                <item guid="d132bc5e-560b-4694-9c08-5ff26b6e01ea" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set x [string map {{&quot;} &apos;  \\n {&lt;/p&gt;&lt;p&gt;}} &quot;&lt;pre&gt;&lt;p&gt;[string trim $string]&lt;/p&gt;&lt;/pre&gt;&quot;]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="a09b534e-6bd6-46fb-9cb8-ddc46fec1374" action="return">
                    <command>
                        <body>$x</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="string"/>
            </arguments>
            <response>{}</response>
        </item>
        <item name="cleanVlanList">
            <steps>
                <item guid="8abaa289-a5fc-4ce6-a80a-17e2688523a2" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set fixed_vlanlist [split [string map {{ } {}} $vlan_list] ,] </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6c3e7396-f77a-4498-ad74-3a1528affac2" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set ret_vlan_list {}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="88568fc4-c032-479b-861a-5e20e0821724" action="foreach" useFieldsInCommand="false">
                    <command>
                        <body>i $fixed_vlanlist</body>
                    </command>
                    <nestedSteps>
                        <item guid="01043c4d-dc37-4ec8-8622-b7a657bd4c29" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[string match -nocase *-* $i]</body>
                            </command>
                            <nestedSteps>
                                <item guid="69583535-37e7-407e-9a0a-b20a09442ce0" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="0fc06861-e973-4463-90a2-813b7dd13998" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>lassign [split $i -] start end</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="611b4adf-5481-4a65-887b-4de76a8a51dc" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>{set j $start} {$j &lt;= $end} {incr j}</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="c7c8f060-2513-4589-9575-5cfd1f903c5a" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>lappend ret_vlan_list $j</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ad5192c4-35ed-47b7-9f3c-5e18c8add6ce" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="ace9c630-8068-4eb3-82fa-be329ed95e93" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>lappend ret_vlan_list $i</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b040d3d0-18bb-4e58-beda-d5d20cfce94b" action="return">
                    <command>
                        <body>$ret_vlan_list</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="vlan_list">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
    </procedures>
</testCase>
